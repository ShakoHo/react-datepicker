!function(a,b){var c=(a.createElement,[1,-2,1,0,1,0,1,1,0,1,0,1]),d=["一","二","三","四","五","六","七","八","九","十","十一","十二"],e="class-",f="item-",g={BASIC:"am-datepicker-day",ACTIVE:"am-datepicker-day am-active",DISABLED:"am-datepicker-day am-disabled",CURRENT:"am-datepicker-day am-datepicker-current"},h=yearClassSet={BASIC:"",ACTIVE:"am-active",CURRENT:"am-datepicker-current"},k=function(a,b){var c=new Date;return c.setFullYear(a),c.setMonth(b-1),c.setDate(1),c.getDay()},l=function(a,b){var d=2==b&&(a%4==0&&a%100!=0||a%400==0)?1:0;return c[b-1]+30+d},m=function(a,b,c){var d,g,h,i=0,j={},m=l(a,b),n=l(1==b?a-1:a,1==b?12:b-1),o=(l(12==b?a+1:a,12==b?1:b+1),k(a,b)),o=1==o?7:o?o-1:6;for(d=0;o>d;d++,i++)j[e+i]=-1,j[f+i]=n-o+1+d;for(g=0;m>g;g++,i++)j[e+i]=0,j[f+i]=g+1;for(h=0;42-m-o>h;h++,i++)j[e+i]=-1,j[f+i]=h+1;return c?j[e+(o+c-1)]=2:j[e+o]=1,{active:c?""+(o+c-1):""+o,obj:j}},n=function(a){for(var b={},c=0;12>c;c++)b[e+c]=0,b[f+c]=c+1;return a?b[e+(a-1)]=2:b[e+"0"]=1,{active:a?""+(a-1):"0",obj:b}},o=function(a,b){for(var c={},d=0;12>d;d++)c[e+d]=0,c[f+d]=a+d;return b?c[e+(b-a)]=2:c[e+"0"]=1,{active:b?""+(b-a):"0",obj:c}},p={activeItem:null,getInitialState:function(){var a=this.getCaculate(this.props);return this.activeItem=a.active,a.obj},componentWillReceiveProps:function(a){var b=this.getCaculate(a);this.activeItem=b.active,this.setState(b.obj)},onClick:function(a,b){b&&b.stopPropagation();var c=this.activeItem,d={};null!==c&&c!==a&&1===this.state[e+c]&&(d[e+c]=0),c!==a&&(d[e+a]=2==this.state[e+a]?2:1,this.activeItem=a,this.setState(d)),"function"==typeof this.props.select&&this.props.select(this.state[f+a])}},q=a.createClass({displayName:"DatepickerDayTbody",mixins:[p],getCaculate:function(a){return m(a.year,a.month,a.day)},render:function(){var b=[];for(i=0;i<6;i++){var c=[];for(j=0;j<7;j++){var d,h=7*i+j,k=this.onClick.bind(this,h);switch(this.state[e+h]){case-1:d=g.DISABLED,k=null;break;case 0:d=g.BASIC;break;case 1:d=g.ACTIVE;break;case 2:d=g.CURRENT}c.push(a.createElement("td",{key:h,className:d,onClick:k},this.state[f+h]))}b.push(a.createElement("tr",{key:i},c))}return a.createElement("tbody",null,b)}}),r=a.createClass({displayName:"DatepickerMonthTbody",mixins:[p],getCaculate:function(a){return n(a.month)},render:function(){for(var b,c,g=[],i=0;12>i;i++){switch(c=this.onClick.bind(this,i),this.state[e+i]){case 0:b=h.BASIC;break;case 1:b=h.ACTIVE;break;case 2:b=h.CURRENT}g.push(a.createElement("span",{key:"m-"+i,className:b,onClick:c},d[this.state[f+i]-1]+"月"))}return a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:"7"},g)))}}),s=a.createClass({displayName:"DatepickerYearTbody",mixins:[p],getCaculate:function(a){return o(a.start,a.year)},render:function(){for(var b,c,d=[],g=0;12>g;g++){switch(c=this.onClick.bind(this,g),this.state[e+g]){case 0:b=yearClassSet.BASIC;break;case 1:b=yearClassSet.ACTIVE;break;case 2:b=yearClassSet.CURRENT}d.push(a.createElement("span",{key:"y-"+g,className:b,onClick:c},this.state[f+g]))}return a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{colSpan:"7"},d)))}}),t=a.createClass({displayName:"Datepicker",getDate:function(){return{year:this.state.year,month:this.state.month,day:this.state.day}},getInitialState:function(){var a=this.props.year,b=this.props.month,c=this.props.day;return{year:a,month:b,day:c,panel:1}},changePanel:function(){this.setState({panel:this.state.panel+1})},selectDay:function(a){var b=this.state.month<10?"0"+this.state.month:""+this.state.month,a=10>a?"0"+a:""+a;"function"==typeof this.props.select&&this.props.select(this.state.year,b,a)},selectMonth:function(a){var b=this.state.year,c=b==this.props.year&&a==this.props.month?this.props.day:null;this.setState({month:a,day:c,panel:1})},selectYear:function(a){this.state.month;this.setState({year:a,panel:2})},onWheel:function(a){a.deltaY>0?this.goNext():this.goPrev()},goPrev:function(a){if(a&&a.stopPropagation(),1==this.state.panel){var b=this.state.year-(1==this.state.month?1:0),c=1==this.state.month?12:this.state.month-1,d=b==this.props.year&&c==this.props.month?this.props.day:null;this.setState({year:b,month:c,day:d})}else if(2==this.state.panel){var b=this.state.year-1,c=b==this.props.year?this.props.month:null;this.setState({year:b,month:c,day:null})}else if(3==this.state.panel){var b=this.state.year-12,c=b==this.props.year?this.props.month:null;this.setState({year:b,month:c,day:null})}},goNext:function(a){if(a&&a.stopPropagation(),1==this.state.panel){var b=this.state.year+(12==this.state.month?1:0),c=12==this.state.month?1:this.state.month+1,d=b==this.props.year&&c==this.props.month?this.props.day:null;this.setState({year:b,month:c,day:d})}else if(2==this.state.panel){var b=this.state.year+1,c=b==this.props.year?this.props.month:null;this.setState({year:b,month:c,day:null})}else if(3==this.state.panel){var b=this.state.year+12,c=b==this.props.year?this.props.month:null;this.setState({year:b,month:c,day:null})}},render:function(){var b=null;if(1==this.state.panel)b=a.createElement("table",{className:"am-datepicker-table",onWheel:this.onWheel},a.createElement("thead",null,a.createElement("tr",{className:"am-datepicker-header"},a.createElement("th",{className:"am-datepicker-prev"},a.createElement("i",{className:"am-datepicker-prev-icon",onClick:this.goPrev})),a.createElement("th",{colSpan:"5",className:"am-datepicker-switch"},a.createElement("div",{className:"am-datepicker-select",onClick:this.changePanel},this.state.year,"年",this.state.month,"月")),a.createElement("th",{className:"am-datepicker-next"},a.createElement("i",{className:"am-datepicker-next-icon",onClick:this.goNext}))),a.createElement("tr",null,["一","二","三","四","五","六","日"].map(function(b,c){return a.createElement("th",{key:"th-"+c,className:"am-datepicker-dow"},b)}))),a.createElement(q,{year:this.state.year,month:this.state.month,day:this.state.day,select:this.selectDay}));else if(2==this.state.panel)b=a.createElement("table",{className:"am-datepicker-table",onWheel:this.onWheel},a.createElement("thead",null,a.createElement("tr",{className:"am-datepicker-header"},a.createElement("th",{className:"am-datepicker-prev"},a.createElement("i",{className:"am-datepicker-prev-icon",onClick:this.goPrev})),a.createElement("th",{colSpan:"5",className:"am-datepicker-switch"},a.createElement("div",{className:"am-datepicker-select",onClick:this.changePanel},this.state.year)),a.createElement("th",{className:"am-datepicker-next"},a.createElement("i",{className:"am-datepicker-next-icon",onClick:this.goNext})))),a.createElement(r,{month:this.state.month,select:this.selectMonth}));else if(3==this.state.panel){var c=this.state.year-this.state.year%10,d=c==this.props.year-this.props.year%10?this.props.year:null;b=a.createElement("table",{className:"am-datepicker-table",onWheel:this.onWheel},a.createElement("thead",null,a.createElement("tr",{className:"am-datepicker-header"},a.createElement("th",{className:"am-datepicker-prev"},a.createElement("i",{className:"am-datepicker-prev-icon",onClick:this.goPrev})),a.createElement("th",{colSpan:"5",className:"am-datepicker-switch"},a.createElement("div",{className:"am-datepicker-select"},c,"-",c+9)),a.createElement("th",{className:"am-datepicker-next"},a.createElement("i",{className:"am-datepicker-next-icon",onClick:this.goNext})))),a.createElement(s,{start:c,year:d,select:this.selectYear}))}return a.createElement("div",{className:"am-datepicker",style:{display:"block"},onWheel:this.onWheel},a.createElement("div",{className:"am-datepicker-days",style:{display:"block"}},b))}});b.Datepicker=function(b,c,d){c||(c=new Date),a.render(a.createElement(t,{year:c.getFullYear(),month:c.getMonth()+1,day:c.getDate(),select:d}),b)}}(React,window);